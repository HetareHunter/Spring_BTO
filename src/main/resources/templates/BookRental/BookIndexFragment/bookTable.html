<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" th:remove="tag">

</head>

<body>

	<div th:fragment="tableReload">
		<div id="searchTableStr" th:name="${searchStr}" type=hidden></div>
		<div class="col-md-12 col-sm-12 col-xs-12">

			<th:block th:if="${bookList.size() > 0}">
				<div class="bl_media_container">
					<th:block th:each="book: ${bookList}" th:object="${book}" id="bookList">
						<div class="card shadow bl_media_itemWrapper">
							<div class=" card-body">
								<div class="bl_media_item">
									<p class="title" th:text="*{bookNameId.title}"></p>
									<div class="flex">

										<figure class="image"><img th:src="@{/images/{items} (items=*{bookNameId.img})}"
												alt="">
										</figure>
										<div class="right">

											<p class="text" th:text="#{author} + '：' + *{bookNameId.author}"></p>
											<p class="text" th:text="*{bookNameId.genre.name}"></p>
											<p class="text" th:text="#{publisher} + '：' + *{bookNameId.publisher}"></p>

											<div class="flex">
												<p class="text" th:text=#{renralActivate}></p>
												<th:block th:if="*{lendable}">
													<div style='font-size: 0em;'>
														<svg xmlns="http://www.w3.org/2000/svg"
															xmlns:xlink="http://www.w3.org/1999/xlink"
															viewBox="0,0,256,256" width="42px" height="42px"
															fill-rule="nonzero">
															<g fill="none" fill-rule="nonzero" stroke="none"
																stroke-width="1" stroke-linecap="butt"
																stroke-linejoin="miter" stroke-miterlimit="10"
																stroke-dasharray="" stroke-dashoffset="0"
																font-family="none" font-weight="none" font-size="none"
																text-anchor="none" style="mix-blend-mode: normal">
																<g transform="scale(2.66667,2.66667)">
																	<path
																		d="M48,85.503c-0.001,0 -0.002,0 -0.003,0c-17.995,-0.002 -37.56,-11.723 -37.997,-37.454c0,-0.034 0,-0.068 0,-0.102c0.259,-15.108 7.646,-27.297 20.268,-33.441c13.327,-6.487 30.023,-4.993 41.542,3.721c1.011,0.764 1.4,2.043 1.082,3.193c1.113,-0.44 2.426,-0.189 3.294,0.733c6.246,6.642 9.641,15.562 9.814,25.796c0,0.034 0,0.068 0,0.102c-0.44,25.732 -20.006,37.452 -38,37.452zM16,47.998c0.393,21.644 16.855,31.504 31.997,31.505c15.143,0 31.607,-9.858 32.003,-31.503c-0.158,-8.695 -2.988,-16.211 -8.186,-21.735c-0.744,-0.792 -0.976,-1.881 -0.706,-2.857c-0.942,0.373 -2.053,0.259 -2.918,-0.396c-9.763,-7.386 -23.948,-8.636 -35.297,-3.11c-10.659,5.188 -16.657,15.164 -16.893,28.096z"
																		fill="#44d62c" opacity="0.3"></path>
																	<path
																		d="M48,84.503c-0.001,0 -0.002,0 -0.003,0c-17.521,-0.002 -36.572,-11.415 -36.997,-36.471c0.252,-14.786 7.434,-26.653 19.705,-32.627c12.999,-6.326 29.275,-4.874 40.502,3.619c0.881,0.666 1.055,1.921 0.388,2.802c-0.666,0.879 -1.92,1.055 -2.802,0.388c-10.055,-7.606 -24.66,-8.896 -36.337,-3.212c-11.029,5.368 -17.228,15.679 -17.456,29.03c0.378,22.286 17.37,32.47 32.997,32.471c15.628,0.001 32.621,-10.181 33.003,-32.537c-0.152,-8.901 -3.076,-16.666 -8.457,-22.387c-0.757,-0.805 -0.718,-2.07 0.087,-2.827c0.804,-0.755 2.07,-0.72 2.827,0.087c6.073,6.457 9.373,15.145 9.543,25.127c-0.429,25.125 -19.479,36.537 -37,36.537z"
																		fill="#44d62c" opacity="0.3"></path>
																	<path
																		d="M43.651,61.776c-0.003,0 -0.005,0 -0.007,0c-4.095,-0.004 -7.148,-3.292 -14.527,-11.236l-1.496,-1.609c-1.129,-1.213 -1.061,-3.111 0.152,-4.24c1.215,-1.128 3.113,-1.059 4.24,0.152l1.5,1.614c4.835,5.206 8.654,9.317 10.136,9.319c0.001,0 0.001,0 0.001,0c1.087,0 3.621,-2.72 6.557,-5.869c3.403,-3.651 8.064,-8.652 15.149,-14.862c1.245,-1.093 3.142,-0.969 4.233,0.278c1.093,1.246 0.968,3.142 -0.278,4.233c-6.857,6.011 -11.399,10.884 -14.716,14.441c-4.672,5.016 -7.248,7.779 -10.944,7.779z"
																		fill="#a4e722" opacity="0.3"></path>
																	<path
																		d="M43.65,60.776c-0.002,0 -0.003,0 -0.005,0c-3.659,-0.004 -6.626,-3.198 -13.796,-10.917l-1.496,-1.61c-0.753,-0.809 -0.707,-2.073 0.102,-2.826c0.806,-0.752 2.073,-0.709 2.826,0.102l1.499,1.612c5.582,6.01 8.951,9.638 10.869,9.64c0,0 0,0 0.001,0c1.521,0 3.815,-2.462 7.288,-6.187c3.389,-3.637 8.03,-8.616 15.077,-14.793c0.831,-0.729 2.094,-0.646 2.822,0.186c0.728,0.832 0.646,2.095 -0.186,2.822c-6.896,6.044 -11.457,10.938 -14.788,14.512c-4.481,4.809 -6.951,7.459 -10.213,7.459z"
																		fill="#a4e722" opacity="0.3"></path>
																	<path
																		d="M48,83.503c-0.001,0 -0.002,0 -0.003,0c-17.048,-0.002 -35.584,-11.107 -35.997,-35.488c0.245,-14.361 7.222,-25.907 19.143,-31.71c12.669,-6.168 28.526,-4.755 39.461,3.517c0.44,0.334 0.527,0.961 0.194,1.401c-0.335,0.439 -0.961,0.525 -1.401,0.194c-10.347,-7.828 -25.366,-9.161 -37.379,-3.314c-11.384,5.542 -17.784,16.165 -18.018,29.912c0.39,22.996 17.896,33.487 33.997,33.488c16.102,0.001 33.609,-10.488 34.003,-33.52c-0.156,-9.189 -3.175,-17.185 -8.729,-23.089c-0.378,-0.402 -0.359,-1.035 0.043,-1.414c0.402,-0.378 1.034,-0.359 1.414,0.043c5.9,6.273 9.106,14.731 9.271,24.46c-0.416,24.415 -18.952,35.52 -35.999,35.52z"
																		fill="#44d62c"></path>
																	<path
																		d="M43.65,59.776c-0.001,0 -0.003,0 -0.004,0c-3.224,-0.003 -6.308,-3.323 -13.063,-10.598l-1.498,-1.61c-0.376,-0.404 -0.354,-1.037 0.051,-1.414c0.405,-0.375 1.037,-0.353 1.414,0.051l1.498,1.612c6.157,6.629 9.248,9.957 11.601,9.959c0,0 0.001,0 0.002,0c1.957,0 4.11,-2.311 8.02,-6.505c3.374,-3.621 7.996,-8.579 15.005,-14.723c0.414,-0.362 1.047,-0.323 1.411,0.093c0.364,0.415 0.322,1.047 -0.093,1.411c-6.934,6.077 -11.515,10.993 -14.86,14.582c-4.292,4.605 -6.656,7.142 -9.484,7.142z"
																		fill="#a4e722"></path>
																</g>
															</g>
														</svg>
													</div>
												</th:block>
												<th:block th:if="*{!lendable}">
													<div style='font-size: 0em;'>
														<svg xmlns="http://www.w3.org/2000/svg"
															xmlns:xlink="http://www.w3.org/1999/xlink"
															viewBox="0,0,256,256" width="42px" height="42px"
															fill-rule="nonzero">
															<g fill="none" fill-rule="nonzero" stroke="none"
																stroke-width="1" stroke-linecap="butt"
																stroke-linejoin="miter" stroke-miterlimit="10"
																stroke-dasharray="" stroke-dashoffset="0"
																font-family="none" font-weight="none" font-size="none"
																text-anchor="none" style="mix-blend-mode: normal">
																<g transform="scale(2.66667,2.66667)">
																	<path
																		d="M36,63c-0.768,0 -1.536,-0.293 -2.121,-0.879c-1.172,-1.171 -1.172,-3.071 0,-4.242l24,-24c1.171,-1.172 3.071,-1.172 4.242,0c1.172,1.171 1.172,3.071 0,4.242l-24,24c-0.585,0.586 -1.353,0.879 -2.121,0.879z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M36,62c-0.512,0 -1.024,-0.195 -1.414,-0.586c-0.781,-0.781 -0.781,-2.047 0,-2.828l24,-24c0.78,-0.781 2.048,-0.781 2.828,0c0.781,0.781 0.781,2.047 0,2.828l-24,24c-0.39,0.391 -0.902,0.586 -1.414,0.586z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M44.464,47.465c-0.768,0 -1.536,-0.293 -2.122,-0.879l-8.464,-8.465c-1.171,-1.172 -1.171,-3.071 0,-4.242c1.171,-1.172 3.071,-1.172 4.243,0l8.464,8.465c1.171,1.172 1.171,3.071 0,4.242c-0.585,0.586 -1.353,0.879 -2.121,0.879z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M44.464,46.465c-0.512,0 -1.024,-0.195 -1.414,-0.586l-8.464,-8.465c-0.781,-0.781 -0.781,-2.047 0,-2.828c0.781,-0.781 2.048,-0.781 2.828,0l8.464,8.465c0.781,0.781 0.781,2.047 0,2.828c-0.39,0.391 -0.902,0.586 -1.414,0.586z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M60,63c-0.768,0 -1.536,-0.293 -2.122,-0.879l-8.464,-8.465c-1.171,-1.172 -1.171,-3.071 0,-4.242c1.171,-1.172 3.071,-1.172 4.243,0l8.464,8.465c1.171,1.172 1.171,3.071 0,4.242c-0.585,0.586 -1.353,0.879 -2.121,0.879z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M60,62c-0.512,0 -1.024,-0.195 -1.414,-0.586l-8.464,-8.465c-0.781,-0.781 -0.781,-2.047 0,-2.828c0.78,-0.781 2.048,-0.781 2.828,0l8.464,8.465c0.781,0.781 0.781,2.047 0,2.828c-0.391,0.391 -0.902,0.586 -1.414,0.586z"
																		fill="#ff5c0f" opacity="0.3"></path>
																	<path
																		d="M48,85.503c-0.001,0 -0.002,0 -0.003,0c-17.995,-0.002 -37.56,-11.723 -37.997,-37.454c0,-0.034 0,-0.068 0,-0.102c0.258,-15.108 7.645,-27.297 20.267,-33.441c13.33,-6.489 30.024,-4.994 41.543,3.721c1.01,0.765 1.4,2.043 1.082,3.194c1.111,-0.442 2.426,-0.189 3.294,0.732c6.247,6.643 9.641,15.563 9.814,25.796c0,0.034 0,0.068 0,0.102c-0.44,25.732 -20.006,37.452 -38,37.452zM16,47.998c0.393,21.644 16.855,31.504 31.998,31.505c15.142,0 31.606,-9.858 32.002,-31.503c-0.158,-8.695 -2.987,-16.21 -8.184,-21.735c-0.745,-0.792 -0.976,-1.882 -0.706,-2.857c-0.943,0.373 -2.052,0.26 -2.919,-0.396c-9.763,-7.385 -23.946,-8.636 -35.297,-3.11c-10.66,5.188 -16.658,15.164 -16.894,28.096z"
																		fill="#d22730" opacity="0.3"></path>
																	<path
																		d="M48,84.503c-0.001,0 -0.002,0 -0.003,0c-17.521,-0.001 -36.572,-11.415 -36.997,-36.471c0.251,-14.786 7.433,-26.653 19.704,-32.627c13.001,-6.327 29.277,-4.874 40.502,3.619c0.881,0.666 1.055,1.921 0.389,2.802c-0.667,0.881 -1.922,1.055 -2.802,0.388c-10.056,-7.607 -24.659,-8.897 -36.338,-3.212c-11.028,5.368 -17.227,15.679 -17.455,29.03c0.379,22.286 17.371,32.47 32.999,32.471c15.626,0.001 32.62,-10.181 33.001,-32.537c-0.152,-8.901 -3.076,-16.666 -8.457,-22.387c-0.756,-0.805 -0.718,-2.07 0.087,-2.827c0.805,-0.758 2.07,-0.719 2.827,0.087c6.074,6.458 9.374,15.146 9.542,25.127c-0.427,25.125 -19.478,36.537 -36.999,36.537z"
																		fill="#d22730" opacity="0.3"></path>
																	<path
																		d="M36,61c-0.256,0 -0.512,-0.098 -0.707,-0.293c-0.391,-0.391 -0.391,-1.023 0,-1.414l24,-24c0.391,-0.391 1.023,-0.391 1.414,0c0.391,0.391 0.391,1.023 0,1.414l-24,24c-0.195,0.195 -0.451,0.293 -0.707,0.293z"
																		fill="#ff5c0f"></path>
																	<path
																		d="M44.464,45.465c-0.256,0 -0.512,-0.098 -0.707,-0.293l-8.464,-8.465c-0.391,-0.391 -0.391,-1.023 0,-1.414c0.391,-0.391 1.023,-0.391 1.414,0l8.464,8.465c0.391,0.391 0.391,1.023 0,1.414c-0.195,0.195 -0.451,0.293 -0.707,0.293z"
																		fill="#ff5c0f"></path>
																	<path
																		d="M60,61c-0.256,0 -0.512,-0.098 -0.707,-0.293l-8.464,-8.465c-0.391,-0.391 -0.391,-1.023 0,-1.414c0.391,-0.391 1.023,-0.391 1.414,0l8.464,8.465c0.391,0.391 0.391,1.023 0,1.414c-0.195,0.195 -0.451,0.293 -0.707,0.293z"
																		fill="#ff5c0f"></path>
																	<path
																		d="M48,83.503c-0.001,0 -0.002,0 -0.003,0c-17.047,-0.001 -35.584,-11.107 -35.997,-35.488c0.245,-14.361 7.222,-25.907 19.143,-31.71c12.669,-6.169 28.527,-4.755 39.461,3.517c0.44,0.334 0.527,0.961 0.194,1.401c-0.333,0.439 -0.961,0.525 -1.401,0.194c-10.348,-7.828 -25.369,-9.159 -37.378,-3.314c-11.385,5.542 -17.784,16.165 -18.019,29.912c0.39,22.996 17.897,33.487 33.998,33.488c16.101,0.001 33.609,-10.488 34.002,-33.52c-0.156,-9.188 -3.174,-17.185 -8.728,-23.089c-0.378,-0.402 -0.359,-1.035 0.043,-1.414c0.402,-0.377 1.036,-0.358 1.414,0.043c5.9,6.273 9.106,14.731 9.271,24.46c-0.417,24.415 -18.953,35.52 -36,35.52z"
																		fill="#d22730"></path>
																</g>
															</g>
														</svg>
													</div>
												</th:block>
											</div>
										</div>
									</div>
									<p class="tableText" th:text="*{bookNameId.detail}"></p>
								</div>
							</div>
							<div class="card-footer">
								<th:block th:if="*{lendable}">
									<div class="mr-10">
										<div th:id="debug+${book.id}" th:name="*{lendable}"></div>
										<form method="get" th:id="'book_cart_'+${book.Id}">
											<button class="w-80 btn btn-primary cartButtonSet_" type="button"
												th:name="${book.id}" th:text="カートに入れる"
												th:id="'cartButtonSet_'+${book.Id}"
												th:onclick="changeBookNum(1);"></button>
										</form>
									</div>
								</th:block>
								<th:block th:each="lend : ${cartLendingList}">
									<th:block th:if="${lend.book.id == book.id}">
										<td>
											<div class="mr-10">
												<form method="get" th:id="'book_cartDelete_'+${book.Id}">
													<button class="w-60 btn btn-primary book_cartDelete_" type="button"
														th:name="${book.id}" th:text="カートから取り出す"
														th:id="'cartButtonDelete_'+${book.Id}"
														th:onclick="changeBookNum(-1);"></button>
												</form>
											</div>
										</td>
									</th:block>
								</th:block>
							</div>
						</div>
					</th:block>
				</div>
			</th:block>
			<div th:if="${bookList.size() == 0}">
				<p>該当データがありません</p>
			</div>
			<th:block th:if="${cartLendingList.size() >= 1}">
				<div class="mb-2">
					<form th:action="@{/bookRental}" method="get">
						<button class="w-25 btn btn-primary" type="submit" th:text="本を借りる"></button>
					</form>
				</div>
			</th:block>
			<th:block th:unless="${cartLendingList.size() >= 1}">
				<div class="mb-2">
					<button class="w-25 btn btn-secondary" type="submit" th:text="本を借りる" disabled></button>
				</div>
			</th:block>

			<th:block th:if="${rentalList.size() >= 1}">
				<div class="mb-2">
					<form th:action="@{/bookReturnRegister}" method="get">
						<button class="w-25 btn btn-primary" type="submit" th:text="本の返却"></button>
					</form>
				</div>
			</th:block>
			<th:block th:unless="${rentalList.size() >= 1}">
				<div class="mb-2">
					<button class="w-25 btn btn-secondary" type="submit" th:text="本の返却" disabled></button>
				</div>
			</th:block>
		</div>
	</div>

</body>

</html>